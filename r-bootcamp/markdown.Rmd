---
title: "Верстка текста и формул с помощью R Markdown"
author: "Заходякин Г.В., postlogist@gmail.com"
date: '6 сентября 2017 г '
output: 
  html_document: 
    toc: true
    toc_float: true
---

# R Markdown

**Markdown** - простой способ форматирования текста с помощью специальных команд разметки. В свою очередь, **R Markdown** позволяет сочетать текстовые пояснения с кодом на R, а также с результатами выполнения этого кода. В результате получается HTML, Word или PDF-файл, который содержит все этапы расчетов и пояснения аналитика. 

Краткую справку по оформлению текста с помощью Markdown можно найти:
 
  - во встроенной документации RStudio - cм. справку: `Help>Markdown Quick Reference`
  - в [шпаргалке по R Markdown на сайте RStudio](https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf) 
  - в [руководстве по R Markdown](https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf) (или в меню `Help>Cheatsheets`)
  
 Два последних документа доступны также через меню: `Help>Cheatsheets` в RStudio. 

Помимо документов, с помощью R Markdown можно создавать презентации, книги, информационные панели, научные статьи, веб-сайты. С примерами и дополнительной информацией можно познакомиться на сайте http://rmarkdown.rstudio.com/.


# Краткая справка по синтаксису Markdown

## Сплошной текст


Вы можете набирать сплошной текст абзаца в несколько строк. Это удобно делать, чтобы при наборе текст помещался на экране.
Разрывы строк (клавиша Enter) будут удалены.

```
Это первая строка.
Это тоже первая строка.
```
Это первая строка.
Это тоже первая строка.



## Абзацы

Если, наоборот, надо начать новый абзац, - добавьте пустую строку между ними (Enter).

```
Текст первого абзаца

Текст второго абзаца
```
Текст первого абзаца

Текст второго абзаца


## Разрыв строки

Если необходимо перейти на новую строку, не завершая абзац - добавьте два пробела в конце строки.

```
Это первая строка абзаца.<два пробела в конце>  
Это вторая строка этого же абзаца.
```
Это первая строка абзаца.  
Это вторая строка этого же абзаца.


Или можно вставить тег HTML для разрыва строки:

`Это - первая строка абзаца,<br/> а это - вторая`

Это - первая строка абзаца,<br/> а это - вторая


## Заголовки

Чтобы сделать текст заголовком, добавьте перед ним символ: `#` через пробел.

```
# Уровень 1 `<h1>`
## Уровень 2 `<h2>`
### Уровень 3 `<h3>`
```
(Результат не показан здесь, чтобы не портить структуру оглавления документа).

## Выделение

```
Этот текст выделен *курсивом*. Этот текст выделен **жирным шрифтом**. Этот текст выделен ***жирным курсивом***.
```

Этот текст выделен *курсивом*. Этот текст выделен **жирным шрифтом**. Этот текст выделен ***жирным курсивом***.



или так:

```
Этот текст выделен _курсивом_. Этот текст выделен __жирным шрифтом__. Этот текст выделен ___жирным курсивом___.
```

Этот текст выделен _курсивом_. Этот текст выделен __жирным шрифтом__. Этот текст выделен ___жирным курсивом___.


## Код

```
Ключевые слова и выражения можно выделять `прямым шрифтом`. 
```

Ключевые слова и выражения можно выделять `прямым шрифтом`. 


### Блок кода

Чтобы передать текст дословно, отключить команды форматирования, необходимо заключить его между двумя тройными знаками апострофа: ```.


```
Это блок текста *(1-я строка)*
Это блок текста (2-я строка)
```

Никакие команды форматирования внутри такого блока не интерпретируются.

## Маркированные списки
```
- Элемент 1
    - Элемент 11
        - Элемент 111
        - Элемент 112  
    - Элемент 12
- Элемент 2
```
- Элемент 1
    - Элемент 11
        - Элемент 111
        - Элемент 112  
    - Элемент 12
- Элемент 2

## Нумерованные списки

```
1. Элемент 1
    1. Элемент 11
        1. Элемент 111
        1. Элемент 112  
    1. Элемент 12
1. Элемент 2
    a) Элемент 2a
    a) Элемент 2b
```

1. Элемент 1
    1. Элемент 11
        1. Элемент 111
        1. Элемент 112  
    1. Элемент 12
1. Элемент 2
    a) Элемент 2a
    a) Элемент 2b


## Гиперссылки и изображения

### Просто URL
http://ya.ru


### Ссылка в тексте

**Код:**
```
Открыть [Яндекс](http://ya.ru)
```
**Результат:**

Открыть [Яндекс](http://ya.ru)


### Вставка изображений

**Код:**
```
Картинка из Интернет:

![Подрисуночная надпись](http://dl2.macupdate.com/images/icons256/50318.png)
```
**Результат:**

Картинка из Интернет

![Подрисуночная надпись](http://dl2.macupdate.com/images/icons256/50318.png)


**Код:**
```
Картинка из локального файла (подкаталог `pics` в текущем каталоге):

![Подрисуночная надпись](pics/dplyr.png)
```

**Результат:**

Картинка из локального файла (подкаталог `pics` в текущем каталоге)

![Подрисуночная надпись](pics/dplyr.png)

**Совет:** используйте автодополнение (`Tab`) для ввода имени файла.

Картинка из локального файла встраивается в результирующий документ, ее не нужно прилагать отдельно.

# Набор формул LaTeX

Масса справочников, искать по `'latex набор математических формул'`

Хороший краткий справочник по командам http://en.wikibooks.org/wiki/LaTeX/Mathematics

Чтобы не искать символы по таблицам, пользуйтесь [Detexify](http://detexify.kirelabs.org/classify.html)

Редактор формул Microsoft Office 2007 и более новых также использует команды $\LaTeX$ для набора формул. Для многих команд можно найти подсказку, наведя курсор мыши на палитру символов.

![LaTeX в ворде](pics/latex_word.png)


## Общие принципы

Знаки `$ ... $`, `$$ ... $$`   переключают в математический режим. 

При этом `$x^2 + y^2$` дает формулу внутри строки: $x^2 + y^2$,  
а `$$x^2 + y^2$$` - формулу на отдельной строке (выключную): $$x^2 + y^2$$

Более сложные формулы (матрицы, системы уравнений) верстаются с помощью _окружений_.


Для верстки формул используются _команды_, например: 

Команда        | Результат
:--------------|:---------
`x^2`          | $x^2$
`\pi`          | $\pi$
`\overline{x}` | $\overline{x}$
`\frac{a}{b}`  | $\frac{a}{b}$



Команды могут вкладываться друг в друга. Если команда должна применяться к выражению, в котором больше одного символа, то необходимо заключить это выражение в фигурные скобки: `{ }`.

**Команда:**

`$$ Q^* = \sqrt{ \frac{2 D c_o}{c_h}} $$` 

**Результат:** $$Q^* =\sqrt{ \frac{2 D c_o}{c_h}}$$



## Греческие буквы
Команда   | Результат
:---------|:---------
`\alpha` | $\alpha$
`A` | $A$
`\lambda` | $\lambda$
`\Lambda` | $\Lambda$
`\epsilon`| $\epsilon$ - американский эпсилон
`\varepsilon`| $\varepsilon$ - наш эпсилон


## Индексы и акценты

Команда          | Результат
:----------------|:----------
`x^2`            | $x^2$
`t_k`            | $t_k$
`x^{a+b}`        | $x^{a+b}$
`\hat{y}`        | $\hat{y}$
`\bar{x}`        | $\bar{x}$
`\bar{x+y}`      | $\bar{x+y}$
`\overline{x+y}` | $\overline{x+y}$

## Дроби

Обычная дробь:

`$$ \frac{1}{x+y} $$`
$$\frac{1}{x+y}$$


Многоэтажные дроби выглядят некрасиво:

`$$ \frac{1}{1+\frac{1}{x+y}} $$`
$$\frac{1}{1+\frac{1}{x+y}}$$


Для из записи необходимо использовать команду `\cfrac`:

`$$ \cfrac{1}{1+\cfrac{1}{x+y}} $$`
$$\cfrac{1}{1+\cfrac{1}{x+y}}$$



## Скобки

Для простых выражений можно вводить непосредственно: 

`$$ a(b+c) = ac + bc $$`
$$ a(b+c) = ac + bc $$


`$$ x \in (-\infty, 0] $$`
$$ x \in (-\infty, 0] $$


Для сложных выражений необходимо обозначать пары скобок для автоподбора высоты с помощью команд `\left`, `\right`:

`$$ (\frac{1}{a+b}) $$`
$$ (\frac{1}{a+b}) $$


`$$ \left( \frac{1}{a+b} \right) $$`
$$ \left( \frac{1}{a+b} \right) $$


## Суммы, интегралы

`$$\sum_{i=1}^n x_i$$`
$$\sum_{i=1}^n x_i$$



`$$\int_0^{\infty} f(x)dx$$`
$$\int_0^{\infty} f(x)dx$$



Более правильно:

`$$\int_0^{\infty} f(x) \, \mathrm{d}x$$` 

- пробел перед d: `\,`
- прямой шрифт: `\mathrm{d}`

$$\int_0^{\infty} f(x) \, \mathrm{d}x$$


Пределы снизу и сверху от знака интеграла:

`$$\int\limits_0^{\infty} f(x) \, \mathrm{d}x$$`

- `\limits` - команда для переноса пределов

$$\int\limits_0^{\infty} f(x) \, \mathrm{d}x$$


